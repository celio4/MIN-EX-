import type { Logger } from '@adonisjs/logger';
import type { LazyImport } from '@poppinss/utils/types';
import type { Encryption } from '@boringnode/encryption';
import type { Server as HttpsServer } from 'node:https';
import type { Application } from '@adonisjs/application';
import type { EmitterLike } from '@adonisjs/events/types';
import { type ContainerResolver } from '@adonisjs/fold';
import type { ServerResponse, IncomingMessage, Server as HttpServer } from 'node:http';
import type { MiddlewareAsClass, ParsedGlobalMiddleware } from '../types/middleware.ts';
import type { ServerConfig, HttpServerEvents, ErrorHandlerAsAClass, TestingMiddlewarePipeline } from '../types/server.ts';
import { HttpRequest } from '../request.ts';
import { Router } from '../router/main.ts';
import { HttpResponse } from '../response.ts';
import { HttpContext } from '../http_context/main.ts';
/**
 * The Server class provides the core HTTP server implementation for AdonisJS.
 *
 * It handles incoming HTTP requests by processing them through middleware pipelines,
 * routing them to appropriate handlers, and managing response generation. The server
 * supports custom error handling, middleware registration, and various Node.js HTTP
 * server configurations.
 *
 * @example
 * ```ts
 * const server = new Server(app, encryption, emitter, logger, config)
 * server.use([AuthMiddleware, CorsMiddleware])
 * server.errorHandler(() => import('./error_handler.ts'))
 * await server.boot()
 *
 * http.createServer(server.handle.bind(server))
 * ```
 */
export declare class Server {
    #private;
    /**
     * Indicates whether the server has completed its boot process
     */
    get booted(): boolean;
    /**
     * Indicates whether async local storage is enabled for request context
     */
    get usingAsyncLocalStorage(): boolean;
    /**
     * Creates a new Server instance
     *
     * @param app - AdonisJS application instance
     * @param encryption - Encryption service for secure operations
     * @param emitter - Event emitter for server lifecycle events
     * @param logger - Logger instance for server operations
     * @param config - Server configuration settings
     */
    constructor(app: Application<any>, encryption: Encryption, emitter: EmitterLike<HttpServerEvents>, logger: Logger, config: ServerConfig);
    /**
     * Creates a testing middleware pipeline for unit/integration testing
     *
     * @param middleware - Array of middleware classes to include in pipeline
     * @returns TestingMiddlewarePipeline instance for test execution
     */
    pipeline(middleware: MiddlewareAsClass[]): TestingMiddlewarePipeline;
    /**
     * Registers global middleware to run on all incoming HTTP requests
     *
     * @param middleware - Array of lazy-imported middleware classes
     * @returns The Server instance for method chaining
     */
    use(middleware: LazyImport<MiddlewareAsClass>[]): this;
    /**
     * Registers a custom error handler for HTTP request processing
     *
     * @param handler - Lazy import of the error handler class
     * @returns The Server instance for method chaining
     */
    errorHandler(handler: LazyImport<ErrorHandlerAsAClass>): this;
    /**
     * Initializes the server by compiling middleware, committing routes, and resolving handlers
     *
     * Performs the following operations:
     * - Compiles the middleware stack
     * - Commits registered routes to the router
     * - Resolves and instantiates the custom error handler
     */
    boot(): Promise<void>;
    /**
     * Configures the underlying Node.js HTTP/HTTPS server with timeout settings
     *
     * @param server - Node.js HTTP or HTTPS server instance
     */
    setNodeServer(server: HttpServer | HttpsServer): void;
    /**
     * Gets the underlying Node.js HTTP/HTTPS server instance
     *
     * @returns The configured server instance or undefined if not set
     */
    getNodeServer(): HttpServer<typeof IncomingMessage, typeof ServerResponse> | HttpsServer<typeof IncomingMessage, typeof ServerResponse> | undefined;
    /**
     * Gets the router instance used for route registration and matching
     *
     * @returns The Router instance
     */
    getRouter(): Router;
    /**
     * Creates a Request instance from Node.js request/response objects
     *
     * @param req - Node.js IncomingMessage
     * @param res - Node.js ServerResponse
     * @returns New Request instance
     */
    createRequest(req: IncomingMessage, res: ServerResponse): HttpRequest;
    /**
     * Creates a Response instance from Node.js request/response objects
     *
     * @param req - Node.js IncomingMessage
     * @param res - Node.js ServerResponse
     * @returns New Response instance
     */
    createResponse(req: IncomingMessage, res: ServerResponse): HttpResponse;
    /**
     * Creates an HttpContext instance with request-specific logger
     *
     * @param request - Request instance
     * @param response - Response instance
     * @param resolver - Container resolver for dependency injection
     * @returns New HttpContext instance
     */
    createHttpContext(request: HttpRequest, response: HttpResponse, resolver: ContainerResolver<any>): HttpContext;
    /**
     * Gets the list of registered global middleware
     *
     * @returns Array of parsed global middleware
     */
    getMiddlewareList(): ParsedGlobalMiddleware[];
    /**
     * Handles an incoming HTTP request by creating context and processing through pipeline
     *
     * @param req - Node.js IncomingMessage
     * @param res - Node.js ServerResponse
     * @returns Promise that resolves when request processing is complete
     */
    handle(req: IncomingMessage, res: ServerResponse): Promise<any>;
}

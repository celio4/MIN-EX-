import Macroable from '@poppinss/macroable';
import type { Level } from '@adonisjs/logger/types';
import type { HttpContext } from './http_context/main.ts';
import type { HttpError, StatusPageRange, StatusPageRenderer } from './types/server.ts';
/**
 * The base HTTP exception handler that provides comprehensive error handling capabilities.
 *
 * This class can be inherited to create custom exception handlers for your application.
 * It provides built-in support for:
 *
 * - Self-handling exceptions via their own render/handle methods
 * - Custom status page rendering for different HTTP error codes
 * - Debug-friendly error display during development
 * - Content negotiation for JSON, JSON API, and HTML error responses
 * - Configurable error reporting and logging
 * - Validation error handling with field-specific messages
 *
 * @example
 * ```ts
 * export default class HttpExceptionHandler extends ExceptionHandler {
 *   protected debug = app.inDev
 *   protected renderStatusPages = app.inProduction
 *
 *   protected statusPages = {
 *     '404': (error, ctx) => ctx.view.render('errors/404')
 *   }
 * }
 * ```
 */
export declare class ExceptionHandler extends Macroable {
    #private;
    /**
     * Controls whether to include debug information in error responses
     * When enabled, errors include complete stack traces and detailed debugging info
     * Defaults to true in non-production environments
     */
    protected debug: boolean;
    /**
     * Controls whether to render custom status pages for unhandled errors
     * When enabled, errors with matching status codes use configured status page renderers
     * Defaults to true in production environments
     */
    protected renderStatusPages: boolean;
    /**
     * Mapping of HTTP status code ranges to their corresponding page renderers
     * Supports ranges like '400-499' or individual codes like '404'
     */
    protected statusPages: Record<StatusPageRange, StatusPageRenderer>;
    /**
     * Controls whether errors should be reported to logging systems
     * When disabled, errors are handled but not logged or reported
     */
    protected reportErrors: boolean;
    /**
     * Array of exception class constructors to exclude from error reporting
     * These exceptions are handled but not logged or reported to external systems
     */
    protected ignoreExceptions: any[];
    /**
     * Array of HTTP status codes to exclude from error reporting
     * Errors with these status codes are handled but not logged
     */
    protected ignoreStatuses: number[];
    /**
     * Array of custom error codes to exclude from error reporting
     * Errors with these codes are handled but not logged
     */
    protected ignoreCodes: string[];
    /**
     * Normalizes any thrown value into a standardized HttpError object
     * Ensures the error has required properties like message and status
     * @param error - Any thrown value (Error, string, object, etc.)
     * @returns {HttpError} Normalized error object with status and message
     */
    protected toHttpError(error: unknown): HttpError;
    /**
     * Provides additional context information for error reporting
     * Includes request ID when available for correlation across logs
     * @param ctx - HTTP context containing request information
     * @returns Additional context data for error reporting
     */
    protected context(ctx: HttpContext): any;
    /**
     * Determines the appropriate log level based on HTTP status code
     * 5xx errors are logged as 'error', 4xx as 'warn', others as 'info'
     * @param error - HTTP error object with status code
     * @returns {Level} Appropriate logging level for the error
     */
    protected getErrorLogLevel(error: HttpError): Level;
    /**
     * Determines whether debug information should be included in error responses
     * Override this method to implement context-specific debug control
     * @param _ - HTTP context (unused in base implementation)
     * @returns {boolean} True if debugging should be enabled
     */
    protected isDebuggingEnabled(_: HttpContext): boolean;
    /**
     * Determines whether an error should be reported to logging systems
     * Checks against ignore lists for exceptions, status codes, and error codes
     * @param error - HTTP error to evaluate for reporting
     * @returns {boolean} True if the error should be reported
     */
    protected shouldReport(error: HttpError): boolean;
    /**
     * Renders an error as a JSON response
     * In debug mode, includes full stack trace using Youch
     * @param error - HTTP error to render
     * @param ctx - HTTP context for the request
     */
    renderErrorAsJSON(error: HttpError, ctx: HttpContext): Promise<void>;
    /**
     * Renders an error as a JSON API compliant response
     * Follows JSON API specification for error objects
     * @param error - HTTP error to render
     * @param ctx - HTTP context for the request
     */
    renderErrorAsJSONAPI(error: HttpError, ctx: HttpContext): Promise<void>;
    /**
     * Renders an error as an HTML response
     * Uses status pages if configured, otherwise shows debug info or simple message
     * @param error - HTTP error to render
     * @param ctx - HTTP context for the request
     */
    renderErrorAsHTML(error: HttpError, ctx: HttpContext): Promise<any>;
    /**
     * Renders validation error messages as a JSON response
     * Returns errors in a simple format with field-specific messages
     * @param error - Validation error containing messages array
     * @param ctx - HTTP context for the request
     */
    renderValidationErrorAsJSON(error: HttpError, ctx: HttpContext): Promise<void>;
    /**
     * Renders validation error messages as JSON API compliant response
     * Transforms validation messages to JSON API error object format
     * @param error - Validation error containing messages array
     * @param ctx - HTTP context for the request
     */
    renderValidationErrorAsJSONAPI(error: HttpError, ctx: HttpContext): Promise<void>;
    /**
     * Renders validation error messages as an HTML response
     * Creates simple HTML list of field errors separated by line breaks
     * @param error - Validation error containing messages array
     * @param ctx - HTTP context for the request
     */
    renderValidationErrorAsHTML(error: HttpError, ctx: HttpContext): Promise<void>;
    /**
     * Renders an error to the appropriate response format based on content negotiation
     * Supports HTML, JSON API, and JSON formats based on Accept headers
     * @param error - HTTP error to render
     * @param ctx - HTTP context for the request
     */
    renderError(error: HttpError, ctx: HttpContext): Promise<any>;
    /**
     * Renders validation errors to the appropriate response format based on content negotiation
     * Supports HTML, JSON API, and JSON formats for validation error messages
     * @param error - Validation error to render
     * @param ctx - HTTP context for the request
     */
    renderValidationError(error: HttpError, ctx: HttpContext): Promise<void>;
    /**
     * Reports an error to logging systems if reporting is enabled
     * Allows errors to self-report via their own report method if available
     * @param error - Any error object to report
     * @param ctx - HTTP context for additional reporting context
     */
    report(error: unknown, ctx: HttpContext): Promise<void>;
    /**
     * Handles errors during HTTP request processing
     * Delegates to error's own handle method if available, otherwise renders response
     * @param error - Any error object to handle
     * @param ctx - HTTP context for error handling
     */
    handle(error: unknown, ctx: HttpContext): Promise<any>;
}
